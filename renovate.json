{
    "$schema": "https://docs.renovatebot.com/renovate-schema.json",
    "extends": [
      "config:base",
      ":timezone(Asia/Shanghai)",
      ":dependencyDashboard"
    ],
    "kubernetes": {
      "fileMatch": ["apps/.+\\.yaml$", "infrastructure/.+\\.yaml$"]
    },
    "flux": {
      "fileMatch": ["clusters/.+\\.yaml$", "infrastructure/.+\\.yaml$", "apps/.+\\.yaml$"]
    },
    "packageRules": [
      {
        "description": "所有次要版本 (minor) 和补丁 (patch) 更新，不自动合并，需人工确认",
        "matchUpdateTypes": ["minor", "patch", "pin", "digest"],
        "automerge": false
      },
      {
        "description": "针对 Pocket-ID 的 Docker 镜像进行特殊版本匹配",
        "matchDatasources": ["docker"],
        "matchPackageNames": ["ghcr.io/pocket-id/pocket-id"],
        "versioning": "regex:^(?<major>\\d+)\\.(?<minor>\\d+)\\.(?<patch>\\d+)$"
      }
    ]
  }